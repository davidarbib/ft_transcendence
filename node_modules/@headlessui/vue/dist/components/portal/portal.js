import{Teleport as P,defineComponent as s,h as y,inject as T,onUnmounted as h,provide as E,reactive as w,ref as f,watchEffect as C,computed as b}from"vue";import{render as d}from"../../utils/render.js";import{usePortalRoot as j}from"../../internal/portal-force-root.js";import{getOwnerDocument as c}from"../../utils/owner.js";function v(r){let t=c(r);if(!t)throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${r}`);let l=t.getElementById("headlessui-portal-root");if(l)return l;let e=t.createElement("div");return e.setAttribute("id","headlessui-portal-root"),t.body.appendChild(e)}let R=s({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(r,{slots:t,attrs:l}){let e=f(null),p=b(()=>c(e)),n=j(),u=T(g,null),o=f(n===!0||u==null?v(e.value):u.resolveTarget());return C(()=>{n||u!=null&&(o.value=u.resolveTarget())}),h(()=>{var i,m;let a=(i=p.value)==null?void 0:i.getElementById("headlessui-portal-root");!a||o.value===a&&o.value.children.length<=0&&((m=o.value.parentElement)==null||m.removeChild(o.value))}),()=>{if(o.value===null)return null;let a={ref:e};return y(P,{to:o.value},d({props:{...r,...a},slot:{},attrs:l,slots:t,name:"Portal"}))}}}),g=Symbol("PortalGroupContext"),L=s({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(r,{attrs:t,slots:l}){let e=w({resolveTarget(){return r.target}});return E(g,e),()=>{let{target:p,...n}=r;return d({props:n,slot:{},attrs:t,slots:l,name:"PortalGroup"})}}});export{R as Portal,L as PortalGroup};
